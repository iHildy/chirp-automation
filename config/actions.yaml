version: 1

actions:
  tap_parking_garage_gate:
    description: "Tap the Parking Garage Gate entry on the favorites list"
    timeoutMs: 90000
    steps:
      - type: ensure_emulator_ready
      - type: wake_and_unlock
      - type: ensure_app_open
        package: "com.chirp.access"
        alreadyOpenSelector:
          text: "Parking Garage Gate"
        delayMsIfOpen: 1
        delayMsIfLaunch: 1000
      - type: repeat
        count: 1
        delayMs: 3000
        steps:
          - type: tap_selector
            selector:
              text: "Parking Garage Gate"
          - type: wait_for_any_selector
            selectors:
              - textContains: "UNLOCK"
              - textContains: "LOCKING IN"
            timeoutMs: 1000

  open_garage:
    description: "Open the garage door in Chirp"
    timeoutMs: 30000
    steps:
      - type: ensure_emulator_ready
      - type: wake_and_unlock
      - type: ensure_app_open
        package: "com.chirp.access"
        delayMsIfOpen: 1000
        delayMsIfLaunch: 3000
      - type: wait_for_selector
        selector:
          textContains: "Garage"
        timeoutMs: 10000
      - type: tap_selector
        selector:
          textContains: "Garage"
      - type: tap_selector
        selector:
          textContains: "Open"
      - type: wait_for_text
        textContains: "Opened"
        timeoutMs: 10000

  close_garage:
    description: "Close the garage door in Chirp"
    timeoutMs: 30000
    steps:
      - type: ensure_emulator_ready
      - type: wake_and_unlock
      - type: ensure_app_open
        package: "com.chirp.access"
        delayMsIfOpen: 1000
        delayMsIfLaunch: 3000
      - type: wait_for_selector
        selector:
          textContains: "Garage"
        timeoutMs: 10000
      - type: tap_selector
        selector:
          textContains: "Garage"
      - type: tap_selector
        selector:
          textContains: "Close"
      - type: wait_for_text
        textContains: "Closed"
        timeoutMs: 10000

  tap_coordinates_example:
    description: "Example using fallback coordinates"
    timeoutMs: 15000
    steps:
      - type: ensure_emulator_ready
      - type: wake_and_unlock
      - type: tap_coordinates
        x: 540
        y: 1680
      - type: sleep
        durationMs: 500
