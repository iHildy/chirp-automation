version: 1

actions:
  tap_parking_garage_gate:
    description: "Tap the Parking Garage Gate entry on the favorites list"
    timeoutMs: 90000
    steps:
      - type: ensure_emulator_ready
      - type: wake_and_unlock
      - type: ensure_app_open
        package: "com.chirp.access"
        alreadyOpenSelector:
          text: "Parking Garage Gate"
        delayMsIfOpen: 1
        delayMsIfLaunch: 1000
      - type: repeat
        count: 3
        delayMs: 6000
        steps:
          - type: tap_selector
            selector:
              text: "Parking Garage Gate"
          - type: wait_for_any_selector
            selectors:
              - textContains: "UNLOCK"
              - textContains: "LOCKING IN"
            timeoutMs: 1000

  check_ready:
    description: "Smoke test: ensure emulator is ready"
    timeoutMs: 20000
    steps:
      - type: ensure_emulator_ready
      - type: sleep
        durationMs: 1000

  tap_coordinates_example:
    description: "Example using fallback coordinates"
    timeoutMs: 15000
    steps:
      - type: ensure_emulator_ready
      - type: wake_and_unlock
      - type: tap_coordinates
        x: 540
        y: 1680
      - type: sleep
        durationMs: 500
